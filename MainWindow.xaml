<Window x:Class="SIS_MK.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="SIS_MK - Special Items Searcher"
        Height="600" Width="900"
        Background="{StaticResource BgBrush}"
        Foreground="{StaticResource TextBrush}"
        KeyDown="MainWindow_KeyDown">

    <Grid Margin="10">
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="220"/>
            <ColumnDefinition Width="10"/>
            <ColumnDefinition Width="*"/>
        </Grid.ColumnDefinitions>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
        </Grid.RowDefinitions>

        <!-- Заголовок слева -->
        <TextBlock Grid.Column="0" Grid.Row="0"
           Text="Персонажи"
           FontWeight="Bold" FontSize="16"
           Margin="0,0,0,5"/>

        <!-- Заголовок справа: игра-кнопка + сценарий + персонаж + счетчик -->
        <StackPanel Grid.Column="2" Grid.Row="0"
            Orientation="Horizontal"
            HorizontalAlignment="Right"
            VerticalAlignment="Center">

            <!-- Кнопка выбора игры -->
            <Button Click="ChooseGameButton_Click"
            Background="{StaticResource PanelBrush}"
            Foreground="{StaticResource TextBrush}"
            BorderBrush="{StaticResource BorderBrushColor}"
            Padding="8,2"
            Margin="0,0,20,0">
                <StackPanel Orientation="Horizontal">
                    <TextBlock Text="Игра: "
                       VerticalAlignment="Center"
                       Margin="0,0,4,0"/>
                    <TextBlock Text="{Binding SelectedGame.Name}"
                       VerticalAlignment="Center"
                       FontWeight="Bold"/>
                </StackPanel>
            </Button>

            <!-- Фильтр по сценарию -->
            <TextBlock Text="Сценарий:"
               VerticalAlignment="Center"
               Margin="0,0,6,0"/>
            <ComboBox Width="180"
              ItemsSource="{Binding Scenarios}"
              SelectedItem="{Binding SelectedScenario}"
              Background="{StaticResource PanelBrush}"
              Foreground="{StaticResource TextBrush}"
              BorderBrush="{StaticResource BorderBrushColor}"
              Margin="0,0,20,0"/>

            <!-- Имя персонажа + счётчик -->
            <TextBlock Text="{Binding SelectedCharacter.Name}"
               FontWeight="Bold"
               FontSize="16"
               Margin="0,0,10,0"/>
            <TextBlock Text="{Binding CounterText}"
               FontSize="16"
               Foreground="{StaticResource AccentBrush}"/>
        </StackPanel>




        <!-- Список персонажей слева -->
        <ListBox Grid.Column="0" Grid.Row="1"
         Background="{StaticResource PanelBrush}"
         BorderBrush="{StaticResource BorderBrushColor}"
         ItemsSource="{Binding Characters}"
         SelectedItem="{Binding SelectedCharacter}">
            <ListBox.ItemTemplate>
                <DataTemplate>
                    <StackPanel Orientation="Horizontal" Margin="4">
                        <Image Width="48" Height="48"
                       Source="{Binding Portrait}"
                       Margin="0,0,6,0"/>
                        <TextBlock Text="{Binding Name}"
                           VerticalAlignment="Center"
                           FontSize="14"/>
                    </StackPanel>
                </DataTemplate>
            </ListBox.ItemTemplate>
        </ListBox>


        <!-- Список предметов -->
        <ListView Grid.Column="2" Grid.Row="1"
          Background="{StaticResource PanelBrush}"
          BorderBrush="{StaticResource BorderBrushColor}"
          ItemsSource="{Binding Items}">
            <ListView.ItemTemplate>
                <DataTemplate>
                    <Border Padding="4"
                    ToolTip="{Binding Tooltip}">
                        <StackPanel Orientation="Horizontal">
                            <CheckBox IsChecked="{Binding IsCollected}"
                              VerticalAlignment="Top"/>
                            <StackPanel>
                                <TextBlock Text="{Binding Name}"
                                   FontWeight="Bold"
                                   FontSize="13"/>
                                <TextBlock Text="{Binding Location}"
                                   FontSize="11"
                                   Foreground="{StaticResource TextSecondaryBrush}"/>
                            </StackPanel>
                        </StackPanel>
                    </Border>
                </DataTemplate>
            </ListView.ItemTemplate>
        </ListView>
    </Grid>
</Window>
